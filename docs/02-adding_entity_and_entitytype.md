# Adding Entity and EntityType

The `Entity` is the basics for every object in the game. From the simple spark of fire to the full animated main
character, all are `Entity`. A `Node` hierarchical tree definition will structure all the Entity in the game.

The `EntityType` define the type of rendering and management.

here is an illustration of the required classes, detailed in the bellow sections.

```plantuml
@startuml
!theme plain
hide Node attributes
interface Node<<T>>{
	+ getName():String	
    + long getId():long
    + setParent(T p):T
    + getParent():T
    + addChild(T c):T
    + getChild():List<T>
}
hide Entity methods
class Entity implements Node{
    - id:long
    - name:String
    - x:double
    - y:double
    - dx:double
    - dy:double
    - child:List<Entity>
    - attributes:Map<String,Object>
}
hide EntityType methods
enum EntityType{
    - DOT,
    - LINE,
    - RECTANGLE,
    - ELLIPSE,
    - IMAGE
}
Entity --> EntityType:type
@enduml
```

## The Entity class

These entities are defined through a class, grouping all the required attributes to make it movable, drawable as some
basic geometric shapes or image, and displayed at the right place.

An entity must be identifiable with a unique ID, and for a more common access and retrievable, with a name.
This ID is auto-generated by an incremental counter, and default name is generated based on this counter, to be sure
that every Entity is uniquely identified.

```java
public class Entity {
    private static long index = 0;
    private long id = ++index;
    private String name = "default_" + id;

    EntityType type = EntityType.RECTANGLE;
    Vector2D position;
    Vector2D velocity;

    double width = 16, height = 16;

    BufferedImage image = null;
    Color borderColor = Color.WHITE;
    Color fillColor = Color.BLUE;
    int direction = 0;

    private Entity parent;
    private List<Enity> child = new ArrayList<>();

    Map<String, Object> attributes = new HashMap<>();

}
```

The 3 first attributes are managing identifier:

- `index` is the internal static counter of entity generated in the game,
- `id` is the unique identifier for that new entity, initialized based on the next value of the counter,
- `name` is the human-readable name, set by default to "default_" + id value;

The 5 next attributes are dedicated to geometric and physic computation:

- `type` is defining the global shape of this entity, (see `EntityType`),
- `position` a 2D vector defining the position of the entity in the play area,
- `velocity` a 2D vector to define current velocity on the play area of this entity,
- `width` and `height` define the size (as a rectangular box) of that entity.

And the next attributes are used for rendering purpose:

- `image` define a `BufferedImage` to be drawn as entity at `position`,
- `borderColor` is the color used to draw edge of this Entity's shape,
- `fillColor` is the color defined to fill this shape.
- `direction` is used to draw image left (<0) or right (=>0) oriented.

As `Entity` can be hierarchically grouped, we need some `Node` management capability.
The 2 next attributes a dedicated to manage this entity's tree:

- `parent` the parent entity if exists, else null,
- `child` a list of child Entity linked to this one.

## The Node Interface

A mentioned on the Entity description, a hierarchical tree is used to organize the game entities.

This tree is composed of node. here is the interface to be implemented in the tree nodes:

```java
public interface Node<T> {
    String getName();

    long getId();

    T setParent(T p);

    T getParent();

    T addChild(T c);

    List<T> getChild();
}
```

These Entity methods are defined to match this interface, based on the 2 attributes `parent` and `child`.
it will also use `id` and `name`.

## The EntityType enumeration

TODO